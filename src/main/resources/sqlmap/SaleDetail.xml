<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<!--
功能模块: 
开发信息: 
-->
<sqlMap namespace="SaleDetail">
	<typeAlias alias="SaleDetail" type="com.guo.bill.pojo.SaleDetail"/>
	<typeAlias alias="PageQuery" type="com.guo.common.PageQuery"/>
	<typeAlias alias="Query" type="com.guo.common.Query"/>

    <resultMap id="RM-SaleDetail" class="SaleDetail">
        <result column="id" property="id" />
        <result column="buy_datetime" property="buyDatetime" />
        <result column="customer_no" property="customerNo" />
        <result column="customer_name" property="customerName" />
        <result column="licenseplate_number" property="licenseplateNumber" />
        <result column="varietiy" property="varietiy" />
        <result column="unit_price" property="unitPrice" />
        <result column="onnage" property="onnage" />
        <result column="total_amount" property="totalAmount" />
        <result column="mine_no" property="mineNo" />
        <result column="mine_name" property="mineName" />
        <result column="tax_point" property="taxPoint" />
        <result column="tax_cost_unit_price" property="taxCostUnitPrice" />
        <result column="tax_cost_total_amount" property="taxCostTotalAmount" />
        <result column="notax_cost_unit_price" property="notaxCostUnitPrice" />
        <result column="notax_cost_total_amount" property="notaxCostTotalAmount" />
        <result column="create_time" property="createTime" />
        <result column="edit_time" property="editTime" />
        <result column="creator" property="creator" />
        <result column="editor" property="editor" />
        <result column="state" property="state" />
    </resultMap>

	<sql id="wherecontation">
		<dynamic prepend="where">
				 /* 创建时间 */
				 <isNotEmpty prepend="and" column="query.createTime">
	  		 		s.CREATE_TIME = #query.createTime#
				 </isNotEmpty>
				 /* 修改时间 */ 
				 <isNotEmpty prepend="and" column="query.editTime">
	  		 		s.EDIT_TIME = #query.editTime#
				 </isNotEmpty>
				 /* 创建人 */ 
				 <isNotEmpty prepend="and" column="query.creator">
	  		 		s.CREATOR = #query.creator#
				 </isNotEmpty>
				 /* 修改人 */ 
				 <isNotEmpty prepend="and" column="query.editor">
	  		 		s.EDITOR = #query.editor#
				 </isNotEmpty>
				 /* 删除状态 */ 
				 <isNotEmpty prepend="and" column="query.state">
	  		 		s.STATE = #query.state#
				 </isNotEmpty>
	  	</dynamic>
	</sql>
	
	<!--
	方法名称: insert
	调用路径: SHIPPERBILL.insert
	开发信息: 
	处理信息: 保存记录
	-->
 	<insert id="insert" parameterClass="SaleDetail" >
	 	INSERT  INTO  saledetail   /*  */
					(		
					 ID		/*  */ 
					,buy_datetime		/* 购买日期 */
					,customer_no		/* 客户编号 */
					,customer_name		/* 客户姓名 */
					,licenseplate_number		/* 车牌号 */
					,varietiy		/* 品种 */
					,unit_price		/* 单价 */
					,onnage		/* 吨位 */
					,total_amount		/* 总金额 */
					,mine_no		/* 煤矿编号 */
					,mine_name		/* 煤矿名称 */
					,tax_point		/* 税点 */
					,tax_cost_unit_price		/* 含税成本单价 */
					,tax_cost_total_amount		/* 含税成本总金额 */
					,notax_cost_unit_price		/* 不含税成本单价 */
					,notax_cost_total_amount		/* 不含税成本总金额 */
					,now()		/* 创建时间 */
					,EDIT_TIME		/* 修改时间 */ 
					,CREATOR		/* 创建人 */ 
					,EDITOR		/* 修改人 */ 
					,'1'		/* 删除状态 */
					)
			values (
					 #id#		/*  */ 
				  	,#buyDatetime#		/* 购买日期 */
				  	,#customerNo#		/* 客户编号 */
				  	,#customerName#		/* 客户姓名 */
				  	,#licenseplateNumber#		/* 车牌号 */
				  	,#varietiy#		/* 品种 */
				  	,#unitPrice#		/* 单价 */
				  	,#onnage#		/* 吨位 */
				  	,#totalAmount#		/* 总金额 */
				  	,#mineNo#		/* 煤矿编号 */
				  	,#mineName#		/* 煤矿名称 */
				  	,#taxPoint#		/* 税点 */
				  	,#taxCostUnitPrice#		/* 含税成本单价 */
				  	,#taxCostTotalAmount#		/* 含税成本总金额 */
				  	,#notaxCostUnitPrice#		/* 不含税成本单价 */
				  	,#notaxCostTotalAmount#		/* 不含税成本总金额 */
				  	,#createTime#		/* 创建时间 */
				  	,#editTime#		/* 修改时间 */ 
				  	,#creator#		/* 创建人 */ 
				  	,#editor#		/* 修改人 */ 
				  	,#state#		/* 删除状态 */ 
					)
	</insert>
	
	
	<!--
	方法名称: update
	调用路径: SHIPPERBILL.update
	开发信息: 
	处理信息: 修改记录
	-->
 	<update id="update" parameterClass="Shipperbill" >
		UPDATE   saledetail  	/*  */
	  		<dynamic prepend=" SET ">
					 /* 创建时间 */
					 <isNotNull  column="createTime" prepend=",">
	    		 		CREATE_TIME = #createTime#
					 </isNotNull>
					 /* 修改时间 */ 
					 <isNotNull  column="editTime" prepend=",">
	    		 		EDIT_TIME = #editTime#
					 </isNotNull>
					 /* 创建人 */ 
					 <isNotNull  column="creator" prepend=",">
	    		 		CREATOR = #creator#
					 </isNotNull>
					 /* 修改人 */ 
					 <isNotNull  column="editor" prepend=",">
	    		 		EDITOR = #editor#
					 </isNotNull>
					 /* 删除状态 */ 
					 <isNotNull  column="state" prepend=",">
	    		 		STATE = #state#
					 </isNotNull>
	  	  </dynamic>
				WHERE
	  	 		 		ID = #id#		/*  */ 
	</update>

	
	<!--
	方法名称: deleteByPriKey
	调用路径: SHIPPERBILL.deleteByPriKey
	开发信息: 
	处理信息: 删除记录
	-->
	<delete id="deleteByPriKey" parameterClass="Shipperbill">
		DELETE 	FROM SHIPPERBILL 	/*  */ 
		WHERE 
			ID = #id#		/*  */ 
	</delete>
	
	<!--
	方法名称: findByPriKey
	调用路径: SHIPPERBILL.findByPriKey
	开发信息: 
	处理信息: 根据主键查询记录
	-->
	<select id="findByPriKey" parameterClass="Shipperbill"  resultClass="Shipperbill">
		   SELECT   
		   FROM   saledetail      AS s      /*  */
		   WHERE
				ID = #id#		/*  */ 
	</select>
	
	<!--
	方法名称: getPagenationList
	调用路径: SHIPPERBILL.getPagenationList
	开发信息: 
	处理信息: 分页查询记录
	-->
	<select id="getPagenationList" parameterClass="PageQuery"  resultMap="RM-SaleDetail">
			<!-- 分页条 -->
		   <include refid="jrp.commons.pageBegin"/>
		   SELECT   
			     *
		   FROM   saledetail s
		 	<include refid="wherecontation"/>
		<!-- 分页条 -->
		<include refid="jrp.commons.pageEnd"/>
			
	</select>
	
	
	<!--
	方法名称: getItemCount
	调用路径: SHIPPERBILL.getItemCount
	开发信息: 
	处理信息: 查询记录数
	-->
	<select id="getItemCount" parameterClass="PageQuery" resultClass="java.lang.Integer">
		SELECT count(1)  FROM  saledetail  AS s	/*  */
		<include refid="wherecontation"/>
	</select>
	
	
	
	<!--
	方法名称: getAllList
	调用路径: SHIPPERBILL.getAllList
	开发信息: 
	处理信息: 查询所有的记录
	-->
	<select id="getAllList" parameterClass="Query"  resultClass="Shipperbill">
		   SELECT   
			     *
		   FROM   saledetail      AS s      /*  */
		 	<include refid="wherecontation"/>
	</select>
	
	
</sqlMap>
